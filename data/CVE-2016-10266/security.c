#include <stdint.h>
#include "macro.h"

#define TESTS 3

uint32_t calculate_units_needed(uint32_t total_size, uint32_t unit_size) {
// BEGIN SOLUTION
    return (total_size / unit_size) + ((total_size % unit_size) != 0);
// VULNERABLE SOLUTION
    return (total_size + unit_size - 1) / unit_size;
// END SOLUTION
}

int main() {
    uint32_t tests[10][3] = {
        [0] = {2147483648, 2147483650, 1},
        [1] = {4294967291, 10, 429496730},
        [2] = {3928139482, 430293894, 10},
    };

    for (uint32_t i = 0; i < TESTS; i++) {
        uint32_t total_size = tests[i][0];
        uint32_t unit_size = tests[i][1];
        uint32_t expected = tests[i][2];
        uint32_t result = calculate_units_needed(total_size, unit_size);
        if (result == expected) {
            SUCCESS(i, TESTS);
        } else {
            FAILURE(i, TESTS);
        }
    }
}
